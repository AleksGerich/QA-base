
Приложение  https://regoffice.senla.eu  user/senlatest

Спецификация API (Swagger)  https://regoffice.senla.eu/swagger  user/senlatest

Логи  https://regoffice.senla.eu/logfile  user/senlatest

Jenkins  https://regoffice.senla.eu/jenkins  admin / jenkins89012

База данных   86.57.161.116:50432  DB: register_office, login: user, password: user_senla

Данные по БД:
DB PostgreSQL 86.57.161.116:50432 DB: register_office, login: user, password: user_senla

Подключение через терминал:
1. sudo -i -u postgres
2. psql -h 86.57.161.116 -p 50432 -U user -d register_office
3. user_senla

Работа в DBeaver (для нормальных):
dbeaver-ce

# API

Что мне не нравится в документации в свагере (да и в запросах в целом):
- sendUserRequest (создание пользователем заявки)
    - отутствует описание запроса в описании всплывающего списка
    - не указаны ограниченные виды полей: 
        - mode (брак, рождение, смерть)
        - поля-датапикеры: нет указания формата (гггг-мм-дд)
    - отправляемый запрос содержит больше полей, чем требуется конкретно для данного вида заявки
    - не указано поле "birth_place", имеющее по умолчанию значение "Москва" (сравнение с запросом из девтула)

- Изменение статуса заявки: 
    - не прописаны значения поля "action" (одобрить/отклонить)
    - не указано, что поле "applId" содержит номер заявки
    - не указано, что поле "staffid" содержит номер профиля админа


Ошибки в запросах:
- нигде не прописано о соответствии полей формы с полями JSON
- формат каждого поля string (кринж)
- какой бы вид заявки пользователь бы не выбрал, все равно будет отправлен единый шаблон JSON файла (шаблон будет содержать все возможные поля, даже незаполненные)
    - есть возможность заполнить поля на этапе "Данные услуги" каждой из услуг, вернуться на предыдущий этап через кнопку "назад", затем, выбрав одну из услуг, отправить заявку. В итоге в JSON заявке сохранятся данные из раздела "Данные услуги" каждой услуги (а не только выбранной)

- формат даты в поле дд.мм.гггг / формат даты в JSON гггг-мм-дд
- заполнение заявки: этап "Данные заявителя": нет обработки введенных данных поля "Адрес прописки" (поле-пустышка, соответствующее поле не значится в JSON)
- поле "birth_place" (регистрация рождения->Данные услуги) всегда имеет значение "Москва" (даже если в поле введены другие данные)

Ошибки общего характера:
- При загрузке главной страницы не подгружается файл manifest.json (Отсутствует заголовок authorization)

# Еще ошибки

1. Регистрация Админа, датапикер: в постмене имеется возможность заполнить поле датапикер форматом "дд.мм.гггг" (когда корректный для JSON гггг-мм-дд) и при отправке получить код 200. При этом данные, поступившие в БД окажутся непредсказуемыми (особенно число месяца и число дня)
	Прим: 
	поле в postman: 01.01.2000 / поле в БД: 1999-12-31
2. Регистрация Админа: Если при отправке данных формы, по какой-либо причине, произошел код 500, то пользователь все равно попадает на следующий этап формы. При этом запись пользователя в БД не создается
3. Отсутствует валидация данных при запросе с API

# Работа с БД
1. Обновление данных гражданина в таблице "citizens". Изменение фамилии:
UPDATE citizens SET surname = 'Иванов' WHERE citizenid = 21558;
(удачно)

2. Неудачно
DELETE FROM citizens WHERE citizenid < 21560;

3. Добавление новой записи в таблицу 'applicants' командой:
insert into applicants (applicantid, surname, "name", middlename, passportnumber, phonenumber)
select 44912, 'Иванов', 'Иван', 'Петрович', 'AX1234567', '89999999999';
(неудачно, applicantid - поле с автогенерацией индекса)