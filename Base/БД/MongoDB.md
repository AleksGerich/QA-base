---
tags:
---

---
# Что такое

MongoDB — это документоориентированная нереляционная СУБД, которая распространяется по лицензии SSPL и имеет открытый исходный код.

---
# Как устроены данные

Базы состоят из коллекций и документов — иерархических структур, содержащих пары «ключ — значение» (поля)

Если проводить аналогии с реляционной базой, коллекции при таком способе хранения соответствуют таблицам, а документы — строкам.

Информация отформатирована в BSON — двоичной кодировке JSON-подобных документов. Это позволяет поддерживать данные типа Date и двоичных файлов, что невозможно в JSON.

У документов нет строгой структуры. Они могут содержать разные наборы полей, причём различающиеся как по типу, так и по количеству. 

*@:*
test> db.smartphones.find()
\[
    {
      \_id: ObjectId("64084a222063b8732a692d5a"),
      model: 'DEXP G450 One',
      color: 'Blue',
      screen: '5 inch',
      year: '2021'
    }
]

Значениями могут быть даже другие документы — их называют встроенными.

Подобно тому, как у строк в реляционных БД есть первичный ключ, у каждого документа в MongoDB есть уникальный идентификатор (в наших примерах это \_id). Он формируется автоматически или задаётся пользователем.

---
# Особенности

#### Кроссплатформенность
- Работает в ОС Windows, Linux и macOS. 
- Она написана на С++.
#### Репликация
- Базы хранятся в виде наборов из связанных между собой экземпляров (реплик) на нескольких серверах (узлах)
- Оригинальный экземпляр — ключевой, в нём выполняются операции. 
- Остальные — вторичные, в них копируются записи из первичного экземпляра. 
- Если на ключевом сервере случилась неисправность или ведутся технические работы, то главной становится одна из копий. Когда сервер заработает в штатном режиме, всё возвратится на свои места. 
- Это называется **репликацией**. Так обеспечивается доступность данных и их резервирование.
#### Шардирование
- **шардирование** — базы разбиваются на части (шарды) и размещаются на разных серверах. Это позволяет сбалансировать нагрузку на них
- Чтобы увеличить пропускную способность СУБД, при работе с большими данными
#### Ограничение размера документов
- Размер документов ограничен — он не может быть больше 16 МБ. 
- Если нужно хранить больший объём информации, применяется технология **GridFS**. Система делится на две коллекции: в первой хранятся имена файлов и метаданные, а во второй — данные, разбитые на небольшие файлы.
#### Специальные запросы
- В MongoDB есть система специальных запросов: данные можно искать по полям и диапазонам, поддерживаются регулярные выражения, можно возвращать пользовательские функции.
#### Индексация
- Чтобы ускорить доступ к данным и поиск по базе, поддерживается индексация.
#### Формат кодировки BSON
- Информация закодирована в формате **BSON** — это помогает быстро искать нужные данные.
#### Свой язык запросов
- Есть собственный язык запросов. 
- В нём не предусмотрены сложные **JOIN**-соединения.

---
# Плюсы и минусы

#### Плюсы
- ***Гибкая система хранения информации***: в приложениях не обязательно преобразовывать объекты в элементы таблиц, не нужно пересоздавать схему базы при изменении структуры данных, например при добавлении нового поля. В документах хранится информация разных типов, что важно при работе с большими данными, которые имеют разную структуру и взяты из разных источников.
- ***Базы легко масштабируются***.
- Большинство языков имеют ***специальные инструменты для работы*** с Mongo — например, в JavaScript это Mongoose.
- Благодаря ***индексации***, системе запросов и другим особенностям можно быстро искать, читать и записывать данные в базах.
- Базы MongoDB могут работать ***сразу на нескольких серверах***: сегментирование позволяет распределять нагрузку, а репликация — создавать копии. Поэтому система работает быстро и без перебоев
#### Минусы
- В базах нет хранимых процедур, триггеров и внешних ключей, поэтому невозможно полностью автоматизировать работу.
- Нет полного соответствия [ACID](Base/БД/Теория%20БД)
- Есть сложности при работе с транзакциями, хотя разработчики стараются это исправить, и в скором времени это у них должно получиться.

СУБД пригодна для использования приложениями, обрабатывающими данные без жёсткой структуры и связей. Базы MongoDB гибкие и масштабируемые, они обеспечивают быструю и надёжную работу программ.


https://metanit.com/nosql/mongodb/1.1.php
https://skillbox.ru/media/code/mongodb-chto-eto-za-subd-plyusy-minusy-podvodnye-kamni/