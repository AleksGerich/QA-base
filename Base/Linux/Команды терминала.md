---
tags:
---

---
# Основные команды

##### Важные моменты:
- регистр учитывается
- структура команды: опция и аргументы

##### Опция
• Опция изменяет поведение команды (как правило: минус, идущий перед буквой)
*@:* -alt
• В одной команде может быть сразу несколько опций
*@:* ls -alt
(ls - отображение содержимого директории)
##### Аргумент
• Аргумент, как правило, дополнительная информация, указывающая команде с чем нужно работать

*@:* ls (без аргумента) просто покажет содержимое текущей директории

*@:* ls Desktop покажет содержимое директории Desktop (/Desktop - аргумент)

*@:* ls -l Desktop покажет содержимое директории Desktop в измененном виде
-l - доп. опция, меняющая вид отображения

##### PID
- process ID 
- Можно использовать для управлением процессом:
	- **sudo kill [PID]**

---
# Навигация по директориям

- **pwd** (print working directory) - отобразить рабочую директорию
	
- **cd** (change directory) - сменить директорию
	- **cd ..** - переход в директорию выше уровнем
	- **cd ~** - переход в домашнюю директорию (из любого места)
	- **cd (пробел)** - также возврат в домашнюю директорию
	- **cd -** - возврат в предыдущую директорию
	
- **ls** (list directory content) - показывает содержимое директории
	- **ls -a** - показывает скрытые файлы
	- **ls -al** - показывает скрытые файлы + информацию о файлах
	- **ls -t** - показывает сначала недавно созданные файлы
	- **ls -d \*/** - отображает только директории в текущей директории

- **man \[имя файла]** - вызов мануала для выбранного файла / директории / опции и т.д.

---
# Дисковое пространство

- **df** (disk free) - показывает использование дискового пространства на уровне файловой системы
	- из минусов - ничего не понятно

- **df -h**
	- **-h** - (human-readable) - выводит в человеческом формате (Mb, Gb и т.д.)
*@:*
![[Pasted image 20241125122921.png]]

Объяснение вывода:
- Filesystem: Указывает имя файловой системы (например, устройство /dev/sda1).
- Size: Общий размер файловой системы.
- Used: Объем занятого пространства.
- Avail: Доступное свободное пространство.
- Use%: Процент использования файловой системы.
- Mounted on: Точка монтирования файловой системы (например, /).

- **df -h [путь к директории]**
	- Выводит информацию только для файловой системы, в которой находится указанная директория
	- показывает, сколько места доступно и занято в файловой системе, на которой лежит указанная директория.
*@: df -h /home/userName* 

---
# Отображение запущенных процессов

- **ps -A** - отображает список процессов. 
	- Флаг *-A* означает "показать все процессы", включая процессы, не связанные с текущим терминалом
*@:*
*ps -A | grep java*
- выполняет поиск всех процессов, содержащих слово java, в списке запущенных процессов в системе
*Пример вывода*

1234 ?        00:02:10 java
4567 ?        00:01:05 /usr/bin/java -jar myapp.jar
	
- PID
- TTY - терминал, к которому привязан процесс (? - фоновый процесс без терминала)
- Время, затраченное процессом на процессорное время.
- Команда, которая запустила процесс

- **ps aux | grep [имя процесса]**
	- покажет более детальную информацию о процессах, включая владельца, использование ресурсов и аргументы командной строки

---
# Сетевые соединения

- **sudo netstat -ntulp** - отображение информации о сетевых соединениях, прослушиваемых портах и соответствующих им процессах
	- **sudo** - повышение прав доступа
	- **netstat** - отображение сетевой статистики и состояния соединений
	- Флаги:
		- **-n** - Показывает адреса и порты в числовом формате (без попытки преобразовать их в имена хостов и сервисов)
		- **-t** - Показывает TCP-соединения
		- **-u** - Показывает UDP-соединения
		- **-l** - Показывает порты, которые находятся в состоянии "прослушивания" (listening)
		- **-p** - Показывает PID и имя процесса, связанного с каждым прослушиваемым портом
*@ (пример вывода):*
![[Pasted image 20241125121616.png]]

- Proto: Протокол соединения (TCP или UDP).
- Recv-Q / Send-Q: Очереди приема и отправки (обычно равны нулю, если соединение активно обрабатывается).
- Local Address: Локальный адрес и порт, которые используются для прослушивания (например, 0.0.0.0:80 означает, что порт 80 прослушивается на всех интерфейсах).
- Foreign Address: Адрес удаленной машины (для "LISTENING" обычно \*).
- State: Состояние соединения (например, LISTEN для прослушивания).
- PID/Program name: Процесс, который использует порт (например, 1234/nginx).

Практическое применение:
- Узнать, какие порты слушает система и какими процессами они заняты.
- Диагностировать сетевые проблемы, связанные с портами.
- Обнаружить потенциально нежелательные процессы, открывающие порты.

- **sudo ss -ntulp** - команда netstat в некоторых современных системах устарела и заменена на ss
	- выполняет ту же задачу с более быстрым и оптимизированным выводом
*@ (пример вывода):*
![[Pasted image 20241125122254.png]]


---
# Создание директорий и папок

- **mkdir** (make directory) - создать директорию
	- можно создать директорию где угодно, прописав путь
		*@:* mkdir /tmp/testdir
	- можно создавать вложенные директории
		*@:* mkdir -p /tmp/testdir/testdir2
	- можно создавать сразу несколько директорий с различным индексом
		*@:* mkdir test-dir{1,2,3} (test-dir1, test-dir2, test-dir3)

- **touch** (create file) - создать файл
	- можно также прописывать путь к создаваемому файлу
		*@:* touch /tmp/test_file
	- как и с директориями можно создавать сразу несколько файлов
		*@:* touch test-file{1,2,3}

---
# Взаимодействие с файлами

#### Поиск файлов

- **find** - поиска файлов и директорий по заданным шаблонам
	- **find [./] -name ["file"]** - поиск по имени "file" в текущей директории
	- **find [/abs/path/dir] -name ["\*.js"]** - поиск в указанной директории всех файлов с расширением js

#### Вывод содержимого

- **cat** (concatenate and display files) - конкатенирует и отображает файлы (все содержимое файла)
	- **cat [file.txt]** - выводи содержимое файла
	- **cat [file1.txt]  [file2.txt]** - объединяет содержимое двух файлов при выводе
	- **cat \*** - вывод содержимого всех файлов в текущей директории
	- **cat [\*.js]** - Вывод всех файлов в директории с расширением .js (или любой другой паттерн)
	- **cat -n [file1.txt]** - нумерация строк при выводе файла

- **zcat** - вывод строк файла архива (формата .gz)
	- *@:* zcat auth.log.2.gz

- **less** (show file content) - отображает содержимое файлов через пейджер
	- более эффективное отображение содержимого файлов если они слишком большие
	- показывает только одну страницу содержимого файла
	- построковое перемещение вверх и вниз с помощью стрелок
	- опуститься вниз страницы с помощью пробела
	- опуститься в самый низ или подняться в самый верх с помощью PgDn и PgUp
	- Q чтобы выйти

- **head \[имя файла]** - отображает первые 10 строк файла
	- **head -\[число отображаемых строк] \[имя файла]** - отображает первые выбранное число строк файла

- **tail \[имя файла]** - отображает последние 10 строк файла
	- **tail -\[число отображаемых строк] \[имя файла]** - отображает последние выбранное число строк файла
	- **tail -f \[имя файла]** - обновляет информацию по мере поступления новых строк в файле

- **grep \[шаблон] \[путь к файлу]** - поиск строк файла по шаблону или регулярным выражениям
	- **grep -n [pattern]  [file.txt]** - нумерация строк при выводе (?)
		- *@:* grep utf-8 ispmgr.sh
		
	- ***дополнительные параметры:***
		- ***-A [n]*** - вывод n строк после совпадения 
			- *@:* **grep [utf-8]  [file1.txt] -A 5**
		- ***-B [n]*** - вывод n строк начала файла ДО совпадения
		- ***-C [n]*** - вывод n строк До совпадения и ПОСЛЕ совпадения
		- ***-i*** - совпадение независимо от регистра 
			- *@:* **grep -i utf-8 file.txt**
		- ***-R*** - рекурсивный поиск в директории 
			- *@:* **grep -R utf-8 /etc**

- **diff [file1.txt]  [file2.txt]** - Построчное сравнение двух файлов. После анализа, выводятся строки, которые не совпадают

- **find [/] | grep [part in filename]** - выведет все имеющиеся файлы в которых будет присутствовать указанная часть в названии
	- *@:* find / | grep viruside
![](Pasted%20image%2020241204115553.png)

#### Копирование

- **cp \[имя файла (фалов)] \[директория назначения]** - копирует файл в указанную директорию
	- По умолчанию копирует в директорию, в которой нахожусь (без пункта назначения)
	*@:* cp ../tmp/testfile Documents/	(testfile скопируется в директорию Documents в разделе tmp)
	
- **cp \[имя директории]/* \[директория назначения]** - скопирует все из указанной директории в директорию назначения (не копирует скрытые файлы и папки)
	
- **cp \[имя файла] \[директория назначения]/\[новое имя файла]** - копирование файла в выбранную директорию с переименованием файла
	*@:* cp ../tmp/testfile Documents/different-name	(testfile скопируется с именем different-name)
	
- **cp -r** - рекурсивное копирование (копирование директорий с файлами)
	- Если копируемый файл имеет то же название, что и содержащейся в директории другой файл, то тот будет перезаписан
	
	- **cp -i** - интеракивный режим, спрашивающий нужно ли перезаписывать уже имеющийся файл (y/n)
	
- **cp \[file] .** - копирование файла в директорию, где нахожусь

#### Перемещение / переименование

- **mv \[имя файла] \[директория назначения]** - перемещает или переименовывает файл
	- работает схожим образом с cp, но удаляет файл из изначальной директории (перемещает)

- **mv \[имя файла] \[новое имя файла]** - переименование файла
	
	- **mv \[имя файла] \[директория назначения]\[новое имя файла]** - перемещение файла в выбранную директорию с новым именем файла
	
	- т.к. в линуксе нет отдельных команд переименовывания, то это единственная команда для такого
	
- **mv -i** - перемещение с  вопросом нужно ли перезаписывать уже имеющийся файл (как cp)
	
- **mv \[имя файла] .** - перемещение файла в директорию, где нахожусь

#### Удаление

- **rm \[имя файла]** удаляет файл
	
- **rm \[имя файла]{перечисление индексов}** - можно удалаять сразу ряд файлов/директорий, созданных с различием только по индексу
	*@:* rm test-file{1,2,3}
	*@:* rmdir test-dir{1,2,3}
- **rm -i \[имя файла]** - интерактивный режим (вопрос: нужно ли)
	
- **rmdir \[имя директории]** - удаляет пустую директорию директорию
	
	- **rm -r \[имя директории]**  - для рекурсивного удаления директории с файлами внутри
		
	- **rm -f \[имя директории]** - принудительное удаление (@: если в директории запущена программа)

Также всегда возможно комбинирование флагов *(@:* rm -rf -i)





[Памятка по командам из Confluence](https://confluence.senlainc.com/pages/viewpage.action?pageId=18940191)
