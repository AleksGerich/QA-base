---
tags:
---

---
# Общий вид git-системы

Git — это **распределенная система контроля версий**. Это значит, что у Git нет какого-то центрального места, где лежит один главный репозиторий, а разработчики работают с ним со своих компьютеров

![[Pasted image 20241106160517.png]]

---
# Состояние файлов в рабочей директории

![[Pasted image 20241130155935.png]]

- **Untracked** (Неотслеживаемый) - файлы, которые еще не были добавлены в контроль версий Git. Чтобы перевести файл в отслеживаемое состояние, его нужно добавить с помощью команды *git add .*
- **Unmodified** (Неизмененный) - файлы, которые уже отслеживаются и находятся в актуальном состоянии, то есть они не изменены по сравнению с последним коммитом.
- **Modified** (Измененный) - это файлы, которые были изменены, но еще не были подготовлены для коммита (не добавлены в индекс). Эти файлы можно снова сделать не измененными, если откатить изменения, либо подготовить к коммиту с помощью *git add .*
- **Staged** (Подготовленный) - файлы, которые были изменены и добавлены в индекс, чтобы быть включенными в следующий коммит.

Сам процесс:
- Add the file (Добавить файл) переводит файл из состояния Untracked в Staged.
- Edit the file (Редактировать файл) переводит его из Unmodified в Modified.
- Stage the file (Добавить в индекс) переводит файл из Modified в Staged.
- Commit (Коммит) переводит файл из Staged обратно в Unmodified.
- Remove the file (Удалить файл) возвращает файл в состояние Untracked.

***К базовым возможностям Git относятся:***
- Возврат к любой прошлой версии кода
- Просмотр истории изменений
- Восстановление любых данных
- Совместная работа без риска потерять данные или перезаписать чужую работу

### Индексирование и добавление в репозиторий файлов

Индексы присваиваются файлам (*add*) для последующего добавления в коммит

Процесс создания и добавления файлов в репозиторий git:

![[Pasted image 20241106151709.png]]

Почему используется длительный процесс добавления файлов в репозиторий:
- в случае, если нет необходимости вносить все файлы в один коммит
- атомарность коммита - выполнение только одной задачи

---
# Перенос файлов в удаленный репозиторий

![[Pasted image 20241130160215.png]]

- **Working Directory** (Рабочая директория) - это директория, где пользователь работает с файлами. Все изменения в файлах происходят здесь до того, как они будут зафиксированы в репозитории.
- **Staging Area** (Индекс/Область подготовки) - это промежуточная область, куда помещаются изменения (измененные файлы) перед коммитом. Здесь можно подготовить файлы для коммита с помощью команды git add .
- **.git Directory** (Repository) — Репозиторий: Это хранилище проекта, где находятся все версии файлов. Здесь хранятся данные о всех коммитах и изменениях в проекте.

Сам процесс:
- Checkout the project (Извлечение проекта) -данный шаг извлекает последнюю версию файлов из репозитория в рабочую директорию, чтобы начать работу с проектом.
- Stage Fixes (Добавление исправлений в индекс) - изменения в файлах подготавливаются для коммита и добавляются в область подготовки с помощью команды git add.
- Commit (Коммит) - после того, как все изменения добавлены в область подготовки, выполняется коммит, который перемещает изменения в репозиторий с помощью команды git commit.

---
# Работа с ветками

![[Pasted image 20241130155554.png]]

Работа с ветками необходима по ряду причин:
1. Существует стабильная версия кода и ее необходимо сохранить
2. Идет параллельная разработка новой функциональности разными айти-специалистами
3. Отсутствие риска изменения свой части кода из-за чужих изменений
4. Возможность по-разному реализовывать одну и ту же фичу и в дальнейшем сравнить.

## Коммиты

Характеристика коммита:
- хронит снимок всх файлов внутри директории
- не просто копирует всю директорию каждый раз, а ужимает коммит в набор изменений (дельта между текущей и предыдущей версией)
- коммит уходит в историю о том, когда какой коммит был сделан (поэтому есть поддержка истории коммитов)
- у каждого коммита (кроме начального) есть "родитель" (C1), который указывает на предыдущий коммит

![[Pasted image 20241107131148.png]]

---
## Ветки (branch)

**branch** - представляет собой ссылку на определенный коммит

![[Pasted image 20241107131315.png]]
- *git branch newImage*

![[Pasted image 20241107131419.png]]
- *git commit*

При создании нового коммита (C2) ссылкой на C2 будет текущая выбранная ветка (в данном случае main)

![[Pasted image 20241107131554.png]]
- *git checkout newImage; git commit*

Для создания коммита под выбранной веткой необходимо на нее переключиться

---
## Слияние веток (merge)

Алгоритм хорошего человека:
1. Создание своей ветки
2. Сделать на ней работу 
3. Слить с общей веткой

Один из способов - **git merge**.
- вид коммита, имеющий сразу двух родителей

*@:*
Вот у нас две ветки, каждая содержит по одному уникальному коммиту. Указатель находится на ветке main:

![[Pasted image 20241107131752.png]]

![[Pasted image 20241107131840.png]]
- *git merge bugFix*

- C4 теперь имеет двух родителей (C2, C3)
- Теперь в ветке main содержатся все изменения в репозитории
- По каждому из родителей можно пройти к C0
- К C4 привязана выбранная в момент merge ветка (main)

Чтобы сдвинуть ветку *bugFix* к C4 нужно переключиться на *bugFix* и замержить ее с веткой main

![[Pasted image 20241107132133.png]]
- *git checkout bugFix; git merge main*

Т.к. ветка bugFix была предшественницей main, Git не делал ничего, только сдвинул bugFix на тот же коммит, где находится main